(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{3024:(e,a,r)=>{"use strict";r.r(a),r.d(a,{default:()=>i});var s=r(5155),t=r(2115),l=r(5028);function o(e){let{itemsList:a,onItemClick:r,onItemDoubleClick:t}=e;return(0,s.jsx)("div",{children:(0,s.jsx)("div",{className:"grid grid-flow-row z-70",children:(0,s.jsx)("div",{id:"drawer-navigation",className:"bg-gray-200 dark:bg-gray-700 w-full transition-transform duration-300 ease-in-out rounded-md",children:(0,s.jsx)("ul",{className:"space-y-2 font-medium",children:a.map(e=>(0,s.jsx)("li",{className:"hover:text-blue-500 cursor-pointer bg-gray-100 dark:bg-gray-900 m-2 p-4 text-sm rounded-md",onClick:()=>r(e),onDoubleClick:()=>t(e),children:e.title},e.id))})})})})}var n=r(6766);function d(e){let{onItemClick:a}=e,[d,i]=(0,t.useState)([]),[c,g]=(0,t.useState)(!1),[u,h]=(0,t.useState)(null),[m,x]=(0,t.useState)(!1),[b,p]=(0,t.useState)(!1),[f,w]=(0,t.useState)(""),[j,v]=(0,t.useState)([]),[k,y]=(0,t.useState)(""),[N,S]=(0,t.useState)("projects=*baseline*&rows=50"),L="https://catalogue.ogsl.ca";"".concat(L,"/api/3/action/package_search?q=").concat("projects=*baseline*");let C="".concat(L,"/api/3/action/package_search?q="),O=(0,l.default)(()=>r.e(415).then(r.bind(r,1415)),{loadableGenerated:{webpack:()=>[1415]},ssr:!1}),_=(0,l.default)(()=>r.e(576).then(r.bind(r,9576)),{loadableGenerated:{webpack:()=>[9576]},ssr:!1}),G=e=>{let a=j.length+1;console.log("id :: "+a),console.log("label :: "+e),v([...j,{id:a,nom:e}])},A=()=>{g(!c)},M=(e,a,r)=>{console.log("Badges :: "+JSON.stringify(e));let s="";for(let a=0;a<e.length;a++)console.log("NOM :: "+e[a].nom),e[a].nom&&(s+="".concat(a>0?"%20AND%20":"").concat(e[a].nom));console.log("Filter String 1 :: "+s),console.log("Filter selected value :: "+r),r&&a?s+="".concat(e.length>0?"%20AND%20":"").concat(r,"=").concat(a):a&&(s+="".concat(e.length>0?"%20AND%20":"").concat(a)),s+="&rows=50",G(a),console.log("Filter String 2 :: "+s),S(s)};return(0,t.useEffect)(()=>{(async()=>{try{console.log("Default :: ");let e="".concat(C).concat(N);console.log("URL:: "+e);let a=await fetch(e),r=await a.json();i(r.result.results),w("")}catch(e){console.log("Error :: "+e.message),h(e.message)}console.log("filtered :: "+d.length)})()},[N]),(0,s.jsxs)("div",{id:"sidebar",children:[(0,s.jsxs)("button",{id:"sidebar-toggle","data-drawer-target":"logo-sidebar","data-drawer-toggle":"logo-sidebar","aria-controls":"logo-sidebar",type:"button",onClick:A,className:"flex justify-between w-screen items-center p-2 text-sm md:hidden bg-gray-50 dark:bg-gray-800 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-gray-200 dark:hover:bg-gray-700 dark:focus:ring-gray-600",children:[(0,s.jsxs)("div",{className:"flex items-center ps-2.5",children:[(0,s.jsxs)("a",{className:"me-3",children:[(0,s.jsx)(n.default,{src:"/Images/OGSL_NoTag.png",className:"h-auto dark:hidden",alt:"OGSL Logo",height:0,width:120}),(0,s.jsx)(n.default,{src:"/Images/OGSL_NoTag_White.png",className:"h-auto hidden dark:block",alt:"OGSL Logo",height:0,width:129}),(0,s.jsx)("span",{className:"self-center text-xl font-semibold whitespace-nowrap",children:"Carte de l'OGSL"})]}),(0,s.jsx)("span",{className:"sr-only",children:"Open sidebar"})]}),(0,s.jsx)("svg",{className:"w-6 h-6","aria-hidden":"true",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:(0,s.jsx)("path",{clipRule:"evenodd",fillRule:"evenodd",d:"M2 4.75A.75.75 0 012.75 4h14.5a.75.75 0 010 1.5H2.75A.75.75 0 012 4.75zm0 10.5a.75.75 0 01.75-.75h7.5a.75.75 0 010 1.5h-7.5a.75.75 0 01-.75-.75zM2 10a.75.75 0 01.75-.75h14.5a.75.75 0 010 1.5H2.75A.75.75 0 012 10z"})})]}),(0,s.jsx)("aside",{id:"logo-sidebar",className:"fixed top-0 left-0 z-40 w-sm h-screen transition-transform ".concat(c?"translate-x-0":"-translate-x-full"," md:translate-x-0"),"aria-label":"Sidebar",children:(0,s.jsxs)("div",{className:"h-full px-3 py-4 bg-gray-50 dark:bg-gray-800 flex flex-col",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between ps-2.5 mb-5",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(n.default,{src:"/Images/OGSL_NoTag.png",className:"h-auto dark:hidden",alt:"OGSL Logo",height:0,width:120}),(0,s.jsx)(n.default,{src:"/Images/OGSL_NoTag_White.png",className:"h-auto hidden dark:block",alt:"OGSL Logo",height:0,width:129}),(0,s.jsx)("span",{className:"self-center text-xl font-semibold whitespace-nowra",children:"Carte de l'OGSL"})]}),(0,s.jsx)("button",{onClick:A,className:"flex items-center p-2 text-sm text-gray-500 rounded-lg md:hidden hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-gray-200 dark:text-gray-400 dark:hover:bg-gray-700 dark:focus:ring-gray-600","aria-controls":"logo-sidebar","data-drawer-toggle":"logo-sidebar",children:(0,s.jsx)("svg",{className:"w-5 h-5 text-gray-600 dark:text-gray-300",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}),(0,s.jsx)("ul",{className:"space-y-2 font-medium",children:(0,s.jsx)("li",{children:(0,s.jsxs)("form",{className:"max-w-lg mx-auto",children:[(0,s.jsx)("label",{children:"Filtrer par"}),(0,s.jsxs)("div",{className:"flex",children:[(0,s.jsxs)("select",{className:"py-2 pl-3 text-sm text-gray-700 dark:text-gray-200 bg-gray-50 border border-gray-300 rounded-l-lg dark:bg-gray-700 dark:border-gray-600 dark:text-white","aria-labelledby":"dropdown-button",onChange:e=>{console.log("ON Selected value :: "+e.target.value),"eov"===e.target.value?y("eov"):"organisation"===e.target.value?y("dataset"):"project"===e.target.value?y("projects"):y("")},children:[(0,s.jsx)("option",{value:"search",children:"Recherche"}),(0,s.jsx)("option",{value:"organisation",children:"Organisation"}),(0,s.jsx)("option",{value:"project",children:"Projet"}),(0,s.jsx)("option",{value:"eov",children:"EOV"})]}),(0,s.jsxs)("div",{className:"relative w-full",children:[(0,s.jsx)("input",{type:"search",id:"search-dropdown",className:"block p-2.5 w-full z-20 text-sm text-gray-900 bg-gray-50 rounded-e-lg border-s-gray-50 border-s-2 border border-gray-300 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-s-gray-700  dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:border-blue-500",placeholder:"Appliquer filtre",required:!0,onChange:e=>{w(e.target.value)},value:f}),(0,s.jsxs)("button",{type:"button",className:"absolute top-0 end-0 p-2.5 text-sm font-medium h-full text-white bg-blue-700 rounded-e-lg border border-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800",onClick:()=>{M(j,f,k)},children:[(0,s.jsx)("svg",{className:"w-4 h-4","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 20 20",children:(0,s.jsx)("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 4v16m8-8H4"})}),(0,s.jsx)("span",{className:"sr-only",children:"Add filter item"})]})]})]})]})})}),(0,s.jsx)("div",{id:"badgesSection",className:"mt-3 mb-3 relative w-full",children:j.map(e=>(0,s.jsx)(_,{label:e.nom},e.id))}),(0,s.jsx)("span",{className:"pt-4 border-t border-t-gray-200 dark:border-t-gray-700",children:"Jeux de donn\xe9es"}),(0,s.jsx)("ul",{className:"flex-grow overflow-y-auto pt-1 mt-1 space-y-2 rounded-md",children:(0,s.jsx)(o,{itemsList:d,onItemClick:e=>{a(e)},onItemDoubleClick:e=>{window.open("".concat(L,"/dataset/").concat(e.name))},className:"flex-grow overflow-y-auto"})}),(0,s.jsx)("div",{className:"pt-3 text-sm font-medium text-gray-900 dark:text-white",children:(0,s.jsx)(O,{count:40,total:60})}),(0,s.jsx)("ul",{className:"pt-4 m-3 space-y-2 font-medium border-t border-gray-200 dark:border-gray-700",children:(0,s.jsx)("li",{children:(0,s.jsxs)("a",{href:"#",className:"flex items-center p-2 text-gray-900 rounded-lg dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700 group",children:[(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13 16h-1v-4h-1m1-4h.01M12 2a10 10 0 100 20 10 10 0 000-20z"})}),(0,s.jsx)("span",{className:"flex-1 ms-3 whitespace-nowrap",children:"\xc0 propos"})]})})})]})})]})}function i(){let[e]=(0,t.useState)([47.485,-62.48]),[a,o]=(0,t.useState)(null),n=(0,l.default)(()=>Promise.all([r.e(484),r.e(533),r.e(761),r.e(710)]).then(r.bind(r,5710)),{loadableGenerated:{webpack:()=>[5710]},ssr:!1});return(0,s.jsx)("div",{className:"relative w-screen gap-16 font-[family-name:var(--font-geist-sans)]",children:(0,s.jsxs)("main",{children:[(0,s.jsx)(d,{onItemClick:e=>{o(e.spatial)}}),(0,s.jsx)("div",{className:"md:ml-64",children:(0,s.jsx)(n,{center:e,bounds:a})})]})})}},5744:(e,a,r)=>{Promise.resolve().then(r.bind(r,3024))}},e=>{var a=a=>e(e.s=a);e.O(0,[701,441,684,358],()=>a(5744)),_N_E=e.O()}]);